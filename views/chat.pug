extends index

include units

include ../client_modules/popup/index
include ../client_modules/inspect/index
include ../client_modules/uploader/index


append header 
    script(src="/socket.io/socket.io.js")
append style 
    include css/chat.css
    include css/content.css
append script 
    include js/chat.js

block main
    h1.page-header= chat.name
    .holder.block
        each data in chat.getMessages(0, -100)
            if data.system 
                +system-message(data.text)
            else 
                +user-message(data, (data.sender.id == observer.id))
    .input-bar
        input.entry(type="text", placeholder="Сообщение")
        input#file.thin(type="button", value="📁")
        input#send.thin(type="button", value="📨")