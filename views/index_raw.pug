
mixin nav(n, light)
    nav
        each k in Object.keys(n)
            a.button(href=n[k].link, id='nav' + k, class=light&&"light")
                span.label= n[k].text
                span.unread.zero

doctype html 
html 
    head
        meta(charset="utf-8")
        script(src="/socket.io/socket.io.js")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        link(rel="icon" href="/public/coffee.png")
        script(src="https://cdn.jsdelivr.net/npm/ejs@3.1.9/ejs.min.js")
        style
            include css/style.css
            block style
        block header
        title CoffeeTox
    body
        .attention-banner#banner1 
        .attention-banner#banner2
        .global-wrapper 
            .main-grid 
                header 
                    .logo 
                        a.button.light(href="/") ‚òïtox
                    .right 
                        .current 
                            if user
                                a.clean(href="/user?id=" + user.id)= user.name
                                a.button.light(href="/logout", recurrent) üö™
                            else
                                a.clean(href="/form?name=login", recurrent) –í—Ö–æ–¥
                        a.burger.clean(href="javascript:callMenu()") –ú–ï–ù–Æ
                +nav(nav, true)
                main.styled-scroll
                    block main
        
        script(type="text/x-ejs-template", template="menu")
            .wrapper 
                +nav(nav)
                .menu-footer
                    img(src=`/public/stickers/capybara/${utils.getRandomInt(0, 47)}.png`, style="height:100px;")
                    span(style="display:block;margin-top:8px;") CoffeeTox 2024
        
        script
            include js/script.js

        block body